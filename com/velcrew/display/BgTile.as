/* AS3	Copyright 2009 __velcrew__.		www.velcrew.com*/package  com.velcrew.display{	import flash.display.Sprite;	import flash.events.Event;	import flash.display.BitmapData;	import flash.display.BlendMode;	 /**     *	Background Tile Class v0.3beta	 *		 *	Background Tile Class v0.2	 *		 *	add new Event -> REMOVED_FROM_STAGE	 *		 *	Background Tile Class v0.1	 *	 *	@langversion ActionScript 3.0	 *	@playerversion Flash 9.0	 *	 *	@author Luis Teixeira aka Fraude	 *	@since  2009-03-11	 */	public class BgTile extends Sprite {				private var _reference  :BitmapData;	    private var _tile  		:Sprite;		private var _alpha 		:Number;		private var _blend 		:String;		private var _rect   	:Object;				public function BgTile(bmp:BitmapData,alpha = 1,blend = "normal", rect:Object = null)		{						addEventListener( Event.ADDED_TO_STAGE, init );			_reference = bmp;			_alpha = alpha;			_blend = blend;						_rect = rect;		}				private function init( event:Event ) : void		{						removeEventListener(Event.ADDED_TO_STAGE, init);			addEventListener(Event.REMOVED_FROM_STAGE, removeThis)		    stage.addEventListener(Event.RESIZE, tileBg);		    tileBg();		}				private function tileBg(e:Event = null):void		{			var oldTile:Sprite  = _tile;		    _tile = new Sprite();		    _tile.graphics.beginBitmapFill(_reference);		    if(_rect == null){				_tile.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);			} else {				_tile.graphics.drawRect(_rect.x, _rect.y, _rect.width, _rect.height);			}					    _tile.graphics.endFill();			_tile.alpha = _alpha;			_tile.blendMode = _blend;		    addChild(_tile);        	if (oldTile != null && oldTile != _tile)        	{		       removeChild(oldTile);	     	}		}						public function removeThis(e:Event = null)		{						removeEventListener(Event.REMOVED_FROM_STAGE, removeThis)			stage.removeEventListener(Event.RESIZE, tileBg);		}				public function set area(value:Object) : void { 			_rect = value; 			tileBg();		}				public function refresh() : void { 			tileBg();		}				}	}